<?php
/**
 * Generated by Haxe 4.3.0
 */

namespace jotun\gateway\domain\zones\session;

use \php\Boot;
use \jotun\gateway\domain\BasicSessionInput;
use \jotun\gateway\domain\zones\DomainZoneCore;

/**
 * ...
 * @author
 */
class SessionVerifyZone extends DomainZoneCore {
	/**
	 * @return void
	 */
	public function __construct () {
		#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:11: characters 3-10
		parent::__construct();
		#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:12: characters 3-15
		$this->setEndZone();
	}

	/**
	 * @param string[]|\Array_hx $data
	 * 
	 * @return void
	 */
	public function _execute ($data) {
		#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:31: lines 31-36
		if ((Boot::typedCast(Boot::getClass(BasicSessionInput::class), $this->get_input()))->session !== null) {
			#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:32: characters 4-63
			(Boot::typedCast(Boot::getClass(BasicSessionInput::class), $this->get_input()))->session->exposeCarrier(true);
			#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:33: characters 4-20
			$this->_fetchData($data);
		} else {
			#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:35: characters 4-58
			$this->error((Boot::typedCast(Boot::getClass(BasicSessionInput::class), $this->get_input()))->getTokenSatus());
		}
	}

	/**
	 * @param string[]|\Array_hx $data
	 * 
	 * @return void
	 */
	public function _fetchData ($data) {
		#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:16: lines 16-27
		if (($data !== null) && ($data->length > 0)) {
			#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:17: characters 23-35
			if ($data->length > 0) {
				$data->length--;
			}
			#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:17: characters 4-36
			$param = \array_shift($data->arr);
			#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:18: lines 18-25
			if ($param === "+refresh") {
				#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:20: characters 6-55
				(Boot::typedCast(Boot::getClass(BasicSessionInput::class), $this->get_input()))->session->refresh();
			} else if ($param === "+user") {
				#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:23: characters 6-61
				(Boot::typedCast(Boot::getClass(BasicSessionInput::class), $this->get_input()))->session->exposeCarrier();
			}
			#src+extras/basic+gateway/jotun/gateway/domain/zones/session/SessionVerifyZone.hx:26: characters 4-20
			$this->_fetchData($data);
		}
	}
}

Boot::registerClass(SessionVerifyZone::class, 'jotun.gateway.domain.zones.session.SessionVerifyZone');
