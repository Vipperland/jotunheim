<?php
/**
 * Generated by Haxe 4.3.0
 */

namespace jotun\gateway\domain\zones;

use \php\Boot;
use \jotun\gateway\database\objects\PA_User;

/**
 * ...
 * @author Rafael Moreira
 */
class ZonePass {
	/**
	 * @var ZonePass
	 */
	static public $CARRIER_PASS;

	/**
	 * @var int
	 */
	public $_read;
	/**
	 * @var int
	 */
	public $_write;

	/**
	 * @return ZonePass
	 */
	public static function get_CARRIER_PASS () {
		#server/jotun/gateway/domain/zones/ZonePass.hx:13: lines 13-15
		if (ZonePass::$CARRIER_PASS === null) {
			#server/jotun/gateway/domain/zones/ZonePass.hx:14: characters 4-37
			ZonePass::$CARRIER_PASS = new ZonePass(0, 0);
		}
		#server/jotun/gateway/domain/zones/ZonePass.hx:16: characters 3-22
		return ZonePass::$CARRIER_PASS;
	}

	/**
	 * @param int $read
	 * @param int $write
	 * 
	 * @return void
	 */
	public function __construct ($read, $write) {
		#server/jotun/gateway/domain/zones/ZonePass.hx:23: characters 3-20
		$this->_read = $read;
		#server/jotun/gateway/domain/zones/ZonePass.hx:24: characters 3-22
		$this->_write = $write;
	}

	/**
	 * @return bool
	 */
	public function isCarrier () {
		#server/jotun/gateway/domain/zones/ZonePass.hx:32: characters 10-61
		if ($this !== ZonePass::get_CARRIER_PASS()) {
			#server/jotun/gateway/domain/zones/ZonePass.hx:32: characters 34-61
			if ($this->_read === 0) {
				#server/jotun/gateway/domain/zones/ZonePass.hx:32: characters 49-60
				return $this->_write === 0;
			} else {
				#server/jotun/gateway/domain/zones/ZonePass.hx:32: characters 34-61
				return false;
			}
		} else {
			#server/jotun/gateway/domain/zones/ZonePass.hx:32: characters 10-61
			return true;
		}
	}

	/**
	 * @return string
	 */
	public function toString () {
		#server/jotun/gateway/domain/zones/ZonePass.hx:36: characters 3-46
		return "[r=" . ($this->_read??'null') . ",w=" . ($this->_write??'null') . "]";
	}

	/**
	 * @param PA_User $user
	 * 
	 * @return bool
	 */
	public function validate ($user) {
		#server/jotun/gateway/domain/zones/ZonePass.hx:28: characters 10-87
		if (($this->_read === 0) || $user->canRead($this->_read)) {
			#server/jotun/gateway/domain/zones/ZonePass.hx:28: characters 49-87
			if ($this->_write !== 0) {
				#server/jotun/gateway/domain/zones/ZonePass.hx:28: characters 65-86
				return $user->canWrite($this->_write);
			} else {
				#server/jotun/gateway/domain/zones/ZonePass.hx:28: characters 49-87
				return true;
			}
		} else {
			#server/jotun/gateway/domain/zones/ZonePass.hx:28: characters 10-87
			return false;
		}
	}

	public function __toString() {
		return $this->toString();
	}
}

Boot::registerClass(ZonePass::class, 'jotun.gateway.domain.zones.ZonePass');
Boot::registerGetters('jotun\\gateway\\domain\\zones\\ZonePass', [
	'CARRIER_PASS' => true
]);
