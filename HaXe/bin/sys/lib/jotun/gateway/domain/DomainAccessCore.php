<?php
/**
 * Generated by Haxe 4.3.4
 */

namespace jotun\gateway\domain;

use \php\Boot;
use \jotun\Jotun;
use \jotun\gateway\domain\zones\DomainZoneCore;
use \jotun\utils\Dice;

/**
 * ...
 * @author
 */
class DomainAccessCore extends DomainZoneCore {
	/**
	 * @var DomainAccessCore
	 */
	static public $_me;

	/**
	 * @return DomainAccessCore
	 */
	public static function getInstance () {
		#src+extras/gateway/jotun/gateway/domain/DomainAccessCore.hx:21: characters 3-13
		return DomainAccessCore::$_me;
	}

	/**
	 * Will carry zone parameters based on service pieces. Ex.:
	 * 	/api/user => UserZone
	 * 		/api/user/login => UserLoginZone
	 * 		/api/user/register => UserRegisterZone
	 * 		/api/user/test => UserRegisterTestZone
	 * 	/api/session => session
	 *
	 *  Note:
	 * 	Zones can required a read or write access pass see UserRegisterZone constructor
	 *
	 * 
	 * @return void
	 */
	public function __construct () {
		#src+extras/gateway/jotun/gateway/domain/DomainAccessCore.hx:38: lines 38-40
		if (DomainAccessCore::$_me !== null) {
			#src+extras/gateway/jotun/gateway/domain/DomainAccessCore.hx:39: characters 4-9
			throw new \ErrorException("Domain is a Singleton");
		}
		#src+extras/gateway/jotun/gateway/domain/DomainAccessCore.hx:41: characters 3-13
		DomainAccessCore::$_me = $this;
		#src+extras/gateway/jotun/gateway/domain/DomainAccessCore.hx:42: characters 3-10
		parent::__construct();
		#src+extras/gateway/jotun/gateway/domain/DomainAccessCore.hx:43: characters 3-29
		$this->carry($this, $this->getServices());
		#src+extras/gateway/jotun/gateway/domain/DomainAccessCore.hx:44: characters 3-54
		\Reflect::deleteField(Jotun::$domain->params, "service");
	}

	/**
	 * @return string[]|\Array_hx
	 */
	public function getServices () {
		#src+extras/gateway/jotun/gateway/domain/DomainAccessCore.hx:48: characters 3-66
		return Dice::nullSkip(Jotun::$domain->paramAsArray("service"));
	}
}

Boot::registerClass(DomainAccessCore::class, 'jotun.gateway.domain.DomainAccessCore');
