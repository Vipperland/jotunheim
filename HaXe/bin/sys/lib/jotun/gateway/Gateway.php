<?php
/**
 * Generated by Haxe 4.3.0
 */

namespace jotun\gateway;

use \php\Boot;
use \jotun\gateway\domain\Output;
use \jotun\Jotun;
use \jotun\gateway\domain\Input;

/**
 * ...
 * @author Rafael Moreira
 */
class Gateway {
	/**
	 * @var Gateway
	 */
	static public $_ME;

	/**
	 * @return Gateway
	 */
	public static function getInstance () {
		#server/jotun/gateway/Gateway.hx:18: characters 3-13
		return Gateway::$_ME;
	}

	/**
	 * @param mixed $TGateway
	 * @param mixed $TDomain
	 * @param mixed $TDataAccess
	 * @param bool $log
	 * @param bool $logdb
	 * @param bool $maintenance
	 * 
	 * @return void
	 */
	public static function init ($TGateway, $TDomain, $TDataAccess, $log, $logdb, $maintenance) {
		#server/jotun/gateway/Gateway.hx:31: characters 3-29
		new $TGateway->phpClassName();
		#server/jotun/gateway/Gateway.hx:33: characters 3-24
		Jotun::$header->access();
		#server/jotun/gateway/Gateway.hx:36: lines 36-38
		if ($logdb) {
			#server/jotun/gateway/Gateway.hx:37: characters 4-26
			Jotun::$gate->enableLog();
		}
		#server/jotun/gateway/Gateway.hx:41: lines 41-43
		if ($log) {
			#server/jotun/gateway/Gateway.hx:42: characters 4-25
			Output::get_ME()->enableLog();
		}
		#server/jotun/gateway/Gateway.hx:45: characters 3-32
		new $TDataAccess->phpClassName();
		#server/jotun/gateway/Gateway.hx:48: characters 3-11
		Input::get_ME();
		#server/jotun/gateway/Gateway.hx:51: characters 3-12
		Output::get_ME();
		#server/jotun/gateway/Gateway.hx:54: lines 54-58
		if (!$maintenance) {
			#server/jotun/gateway/Gateway.hx:55: characters 4-29
			new $TDomain->phpClassName();
		} else {
			#server/jotun/gateway/Gateway.hx:57: characters 4-48
			Output::get_ME()->error(1);
		}
		#server/jotun/gateway/Gateway.hx:61: characters 3-20
		Output::get_ME()->flush();
	}

	/**
	 * @return void
	 */
	public function __construct () {
		#server/jotun/gateway/Gateway.hx:22: lines 22-26
		if (Gateway::$_ME === null) {
			#server/jotun/gateway/Gateway.hx:23: characters 4-14
			Gateway::$_ME = $this;
		} else {
			#server/jotun/gateway/Gateway.hx:25: characters 4-9
			throw new \ErrorException("Gateway is a Singleton");
		}
	}
}

Boot::registerClass(Gateway::class, 'jotun.gateway.Gateway');
