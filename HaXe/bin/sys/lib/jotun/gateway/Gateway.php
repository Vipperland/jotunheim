<?php
/**
 * Generated by Haxe 4.3.0
 */

namespace jotun\gateway;

use \jotun\gateway\domain\OutputCore;
use \php\Boot;
use \jotun\Jotun;
use \jotun\tools\Utils;
use \jotun\gateway\database\DataAccess;

/**
 * ...
 * @author Rafael Moreira
 */
class Gateway {
	/**
	 * @var Gateway
	 */
	static public $_ME;

	/**
	 * @return Gateway
	 */
	public static function getInstance () {
		#src+extras/gateway/jotun/gateway/Gateway.hx:20: characters 3-13
		return Gateway::$_ME;
	}

	/**
	 * Classes will be available in this order: Gateway > Output > DataAccess > Input > Domain.
	 * @param	TGateway
	 * @param	TOutput
	 * @param	TDataAccess
	 * @param	TInput
	 * @param	TDomain
	 * @param	maintenance
	 * 
	 * @param mixed $TGateway
	 * @param mixed $TOutput
	 * @param mixed $TDataAccess
	 * @param mixed $TInput
	 * @param mixed $TDomain
	 * @param bool $maintenance
	 * 
	 * @return void
	 */
	public static function init ($TGateway, $TOutput, $TDataAccess, $TInput, $TDomain, $maintenance) {
		#src+extras/gateway/jotun/gateway/Gateway.hx:42: characters 3-29
		new $TGateway->phpClassName();
		#src+extras/gateway/jotun/gateway/Gateway.hx:44: characters 3-24
		Jotun::$header->access();
		#src+extras/gateway/jotun/gateway/Gateway.hx:47: characters 3-28
		new $TOutput->phpClassName();
		#src+extras/gateway/jotun/gateway/Gateway.hx:50: lines 50-71
		if (!$maintenance) {
			#src+extras/gateway/jotun/gateway/Gateway.hx:52: lines 52-54
			if (Utils::boolean(Boot::dynamicField(Jotun::$domain->params, 'log'))) {
				#src+extras/gateway/jotun/gateway/Gateway.hx:53: characters 5-41
				OutputCore::getInstance()->enableLog();
			}
			#src+extras/gateway/jotun/gateway/Gateway.hx:56: characters 4-33
			new $TDataAccess->phpClassName();
			#src+extras/gateway/jotun/gateway/Gateway.hx:58: lines 58-60
			if (Utils::boolean(Boot::dynamicField(Jotun::$domain->params, 'dblog'))) {
				#src+extras/gateway/jotun/gateway/Gateway.hx:59: characters 5-41
				DataAccess::getInstance()->enableLog();
			}
			#src+extras/gateway/jotun/gateway/Gateway.hx:63: characters 4-28
			new $TInput->phpClassName();
			#src+extras/gateway/jotun/gateway/Gateway.hx:65: characters 4-29
			new $TDomain->phpClassName();
		} else {
			#src+extras/gateway/jotun/gateway/Gateway.hx:69: characters 4-63
			OutputCore::getInstance()->error(1);
		}
		#src+extras/gateway/jotun/gateway/Gateway.hx:74: characters 3-35
		OutputCore::getInstance()->flush();
	}

	/**
	 * @return void
	 */
	public function __construct () {
		#src+extras/gateway/jotun/gateway/Gateway.hx:24: lines 24-28
		if (Gateway::$_ME === null) {
			#src+extras/gateway/jotun/gateway/Gateway.hx:25: characters 4-14
			Gateway::$_ME = $this;
		} else {
			#src+extras/gateway/jotun/gateway/Gateway.hx:27: characters 4-9
			throw new \ErrorException("Gateway is a Singleton");
		}
	}
}

Boot::registerClass(Gateway::class, 'jotun.gateway.Gateway');
