<?php
/**
 * Generated by Haxe 4.3.4
 */

namespace jotun\gaming\actions;

use \php\_Boot\HxAnon;
use \php\Boot;
use \jotun\tools\Utils;

/**
 * ...
 * @author Rafael Moreira
 */
class EventContext {
	/**
	 * @var IEventContextAction
	 */
	public $action;
	/**
	 * @var int
	 */
	public $chain;
	/**
	 * @var IDataProvider
	 */
	public $currentProvider;
	/**
	 * @var IDataProvider
	 */
	public $dataProvider;
	/**
	 * @var bool
	 */
	public $debug;
	/**
	 * @var IEventContext
	 */
	public $event;
	/**
	 * @var Action[]|\Array_hx
	 */
	public $history;
	/**
	 * @var int
	 */
	public $ident;
	/**
	 * @var string[]|\Array_hx
	 */
	public $log;
	/**
	 * @var string
	 */
	public $name;
	/**
	 * @var mixed
	 */
	public $origin;
	/**
	 * @var EventContext
	 */
	public $parent;
	/**
	 * @var IDataProvider
	 */
	public $requestProvider;
	/**
	 * @var IEventContextRequirement
	 */
	public $requirement;
	/**
	 * @var int
	 */
	public $ticks;

	/**
	 * @param string $name
	 * @param mixed $data
	 * @param IDataProvider $provider
	 * @param bool $debug
	 * 
	 * @return void
	 */
	public function __construct ($name, $data, $provider, $debug) {
		#src/jotun/gaming/actions/EventContext.hx:44: characters 3-21
		$this->origin = $data;
		#src/jotun/gaming/actions/EventContext.hx:45: characters 3-19
		$this->name = $name;
		#src/jotun/gaming/actions/EventContext.hx:46: characters 3-21
		$this->debug = $debug;
		#src/jotun/gaming/actions/EventContext.hx:47: characters 3-16
		$this->log = new \Array_hx();
		#src/jotun/gaming/actions/EventContext.hx:48: characters 3-17
		$this->ident = 0;
		#src/jotun/gaming/actions/EventContext.hx:49: characters 3-17
		$this->chain = 0;
		#src/jotun/gaming/actions/EventContext.hx:50: characters 3-17
		$this->ticks = 0;
		#src/jotun/gaming/actions/EventContext.hx:51: characters 3-38
		$this->event = new HxAnon(["current" => null]);
		#src/jotun/gaming/actions/EventContext.hx:52: characters 3-60
		$this->action = new HxAnon([
			"target" => null,
			"count" => 0,
			"queries" => 0,
		]);
		#src/jotun/gaming/actions/EventContext.hx:53: characters 3-65
		$this->requirement = new HxAnon([
			"target" => null,
			"count" => 0,
			"queries" => 0,
		]);
		#src/jotun/gaming/actions/EventContext.hx:54: characters 3-20
		$this->history = new \Array_hx();
		#src/jotun/gaming/actions/EventContext.hx:55: characters 3-31
		$this->dataProvider = $provider;
		#src/jotun/gaming/actions/EventContext.hx:56: characters 3-34
		$this->currentProvider = $provider;
	}

	/**
	 * @param int $i
	 * @param string $message
	 * 
	 * @return void
	 */
	public function addLog ($i, $message) {
		#src/jotun/gaming/actions/EventContext.hx:85: characters 3-72
		$this->log->offsetSet($this->log->length, (Utils::prefix("", $this->ident + $this->chain + $i, "\x09")??'null') . ($message??'null'));
	}

	/**
	 * @param Action $a
	 * 
	 * @return void
	 */
	public function registerAction ($a) {
		#src/jotun/gaming/actions/EventContext.hx:64: characters 3-20
		$this->action->target = $a;
		#src/jotun/gaming/actions/EventContext.hx:65: characters 3-17
		++$this->action->count;
		#src/jotun/gaming/actions/EventContext.hx:66: characters 3-23
		$_this = $this->history;
		$_this->arr[$_this->length++] = $a;
	}

	/**
	 * @param string $q
	 * 
	 * @return void
	 */
	public function registerActionQuery ($q) {
		#src/jotun/gaming/actions/EventContext.hx:70: characters 3-19
		$this->action->query = $q;
		#src/jotun/gaming/actions/EventContext.hx:71: characters 3-19
		++$this->action->queries;
	}

	/**
	 * @param Events $e
	 * 
	 * @return void
	 */
	public function registerEvent ($e) {
		#src/jotun/gaming/actions/EventContext.hx:60: characters 3-20
		$this->event->current = $e;
	}

	/**
	 * @param Requirement $r
	 * 
	 * @return void
	 */
	public function registerRequirement ($r) {
		#src/jotun/gaming/actions/EventContext.hx:75: characters 3-25
		$this->requirement->target = $r;
		#src/jotun/gaming/actions/EventContext.hx:76: characters 3-22
		++$this->requirement->count;
	}

	/**
	 * @param string $q
	 * 
	 * @return void
	 */
	public function registerRequirementQuery ($q) {
		#src/jotun/gaming/actions/EventContext.hx:80: characters 3-24
		$this->requirement->query = $q;
		#src/jotun/gaming/actions/EventContext.hx:81: characters 3-24
		++$this->requirement->queries;
	}
}

Boot::registerClass(EventContext::class, 'jotun.gaming.actions.EventContext');
