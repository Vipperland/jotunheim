<?php

// Generated by Haxe 3.4.7
class sirius_data_Logger {
	public function __construct() {
		if(!php_Boot::$skip_constructor) {
		$this->_level = 4;
		$this->_events = (new _hx_array(array()));
		{
			$o = $this->_events;
			$o->{"query"} = (property_exists($this, "query") ? $this->query: array($this, "query"));
		}
	}}
	public $_events;
	public $_level;
	public function maxLvLog($i) {
		$this->_level = $i;
	}
	public function mute() {
		if(Lambda::indexOf($this->_events, (property_exists($this, "query") ? $this->query: array($this, "query"))) !== -1) {
			$this->_events->splice(0, 1);
		}
	}
	public function unmute() {
		if(Lambda::indexOf($this->_events, (property_exists($this, "query") ? $this->query: array($this, "query"))) === -1) {
			$this->_events->unshift((property_exists($this, "query") ? $this->query: array($this, "query")));
		}
	}
	public function listen($handler) {
		$this->_events[$this->_events->length] = $handler;
	}
	public function push($q, $type) {
		sirius_utils_Dice::Values($this->_events, array(new _hx_lambda(array(&$q, &$type), "sirius_data_Logger_0"), 'execute'), null);
	}
	public function query($q, $type) {
		$b = $this->_level;
		$aNeg = $type < 0;
		$bNeg = $b < 0;
		$tmp = null;
		if($aNeg !== $bNeg) {
			$tmp = $aNeg;
		} else {
			$tmp = $type > $b;
		}
		if($tmp) {
			return;
		}
		$t = null;
		switch($type) {
		case 0:{
			$t = "[MESSAGE] ";
		}break;
		case 1:{
			$t = "[>SYSTEM] ";
		}break;
		case 2:{
			$t = "[WARNING] ";
		}break;
		case 3:{
			$t = "[!ERROR!] ";
		}break;
		case 4:{
			$t = "[//TODO:] ";
		}break;
		case 5:{
			$t = "[*QUERY:] ";
		}break;
		default:{
			$t = "";
		}break;
		}
		php_Lib::dump($q);
	}
	public function __call($m, $a) {
		if(isset($this->$m) && is_callable($this->$m))
			return call_user_func_array($this->$m, $a);
		else if(isset($this->__dynamics[$m]) && is_callable($this->__dynamics[$m]))
			return call_user_func_array($this->__dynamics[$m], $a);
		else if('toString' == $m)
			return $this->__toString();
		else
			throw new HException('Unable to call <'.$m.'>');
	}
	function __toString() { return 'sirius.data.Logger'; }
}
function sirius_data_Logger_0(&$q, &$type, $v) {
	{
		call_user_func_array($v, array($q, $type));
	}
}
